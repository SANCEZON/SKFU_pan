# Техническое задание

**Название:** Панель учёта посещаемости (локальная база Supabase)

**Краткое описание:**
Веб-панель для управления журналом посещаемости учебной группы: выставление отсутствующих по парам, выбор причин отсутствия, статистика и отчёты, профили студентов, журнал логов и заметок. Панель работает с локальной базой Supabase (self-hosted или локальный Docker).

**Цели проекта:**
- Упростить и автоматизировать учёт посещаемости для старосты.
- Быстрый ввод/редактирование статусов на паре.
- Наглядная аналитика (неделя / месяц / семестр).
- История изменений и экспорт отчётов.

## Функциональные требования

### 1. Общие
- Локальная база данных Supabase (возможность run on Docker или self-hosted Supabase).
- Аутентификация пользователей (email/password)
- Респонсивный интерфейс (desktop-first, адаптив для планшетов/мобильных).
- Основные цвета: фон — белый (#FFFFFF), акцент/кнопки — синий (рекомендация #1E6FFF или #007BFF). Минимализм в оформлении.
- Приятные анимации микро-взаимодействий (framer-motion или CSS transitions).

### 2. Управление студентами
- CRUD: добавление, редактирование, удаление студентов.
- Импорт/экспорт студентов (CSV).
- Поля: ФИО, telegram, телефон, статус (активен/отчислен).
- Быстрый поиск и фильтрация (по фамилии, статусу, номеру).

### 3. Управление преподавателями
- CRUD для преподавателей.
- Поля: ФИО, email, предмет(ы),телефон.

### 4. Расписание и его редактирование
- Создание расписания (семестр/неделя): предмет, преподаватель, время, аудитория, тип пары (лекция/лаб/практика).
- Поддержка повторяющихся пар (например, по расписанию: Понедельник 9:00 каждую неделю).
- Возможность редактирования отдельных сессий (разово) или правила повторения.
- Календарный вид и список.

### 5. Вкладка "Проверка посещаемости" (на каждой паре)
- Для выбранной пары отображается список студентов группы с состоянием: Присутствует | Отсутствует | Опоздание | Отпуск | Болезнь и т.п.
- Быстрое массовое отмечание (все присутствуют/все отсутствуют) и одиночное редактирование.
- Выбор причины отсутствия из предопределённого списка + поле для произвольной заметки.
- Кнопка "Отправить отчет" — сохраняет snapshot посещаемости для пары и создаёт запись в журнале (logs/Reports).
- Возможность корректировки отправленного отчёта (с логированием изменений).
- Поиск по студентам прямо в окне пары. Сортировка по фамилии, по группе.

### 6. Вкладка "Отчёты"
- Список отправленных отчетов (дата/время, предмет, преподаватель, отправил).
- Для каждого отчёта: общее количество отсутствующих, список отсутствующих с причинами.
- Функции: просмотр, редактирование (если разрешено), экспорт (CSV / PDF), печать.
- Фильтры: по дате, предмету, преподавателю, группе.

### 7. Вкладка "Графики" (аналитика)
- Диаграммы посещаемости: по дням недели, по неделям, по месяцам.
- Интерактивный период: выбор диапазона (неделя, месяц, семестр, произвольный интервал).
- При клике по точке/бару разворачивается список студентов, отсутствовавших в этот период.
- Возможность сравнить несколько групп/параллелей (опция).

### 8. Вкладка "Профиль студента"
- Для каждого студента: общие пропуски, пропуски за неделю/месяц, примечания.
- Кнопка «показать подробности» раскрывает даты и причины.

### 9. Вкладка "Заметки"
- Личные заметки, CRUD.
- Возможность закреплять заметки.

### 10. Вкладка "Преподаватели"
- Список преподавателей и предметов.

### 11. Вкладка "Логи"
- Автоматическая запись действий: кто и когда изменил посещаемость, кто отправил отчёт, изменения в расписании, удаление/добавление студентов.
- Фильтрация логов по пользователю/типу действия/дате.

### 12. Настройки
- Общие: название группы/компании, описание, локальный часовой пояс.
- Настройки причин отсутствия (управляемый список причин).
- Параметры экспорта (PDF шаблон, CSV delimiter).
- Бэкап/восстановление базы (инструменты для экспорта дампа Supabase).



## Техническая архитектура / Технологии (рекомендуемые)
- **Frontend:** React + TypeScript, Tailwind CSS, Framer Motion (анимации), React Query (данные/кеш), Vite или Next.js (если SSR нужен).
- **Backend / BaaS:** Supabase (Postgres + Auth + Storage + Realtime). Возможность использовать Supabase Edge Functions (JS/TS) для логики, либо небольшой Node.js backend если нужно.
- **Хостинг:** локально (Docker) для Supabase; фронтенд можно хостить локально или на любом статическом хостинге. Для внутренней сети — развёртывание в локальной сети/университетском сервере.
- **Экспорт/импорт:** генерация PDF через серверную функцию (Edge Function) или библиотеку на фронтенде (html2pdf) и CSV через client-side.



## UX / UI — страницы и компоненты
1. **Главная (Dashboard)** — быстрый обзор: сегодняшние пары, быстрый переход к отметке, краткая статистика.
2. **Расписание** — календарь и список. Кнопка "Создать пару".
3. **Пара / Отметка** — полноэкранная панель для пометки присутствующих.
4. **Отчёты** — список и просмотр.
5. **Графики** — интерактивная аналитика.
6. **Студенты** — каталог студентов.
7. **Профиль студента** — детали и история.
8. **Преподаватели** — список и карточки.
9. **Заметки** — быстрый блокнот.
10. **Логи** — журнал изменений.
11. **Настройки**.

**Визуальные рекомендации:**
- Белый фон, карточки с лёгкой тенью и 8–12px скруглением.
- Синий для primary buttons и ссылок. Вторичные кнопки — outline/grey.
- Минималистичная типографика (Inter / System UI).
- Плавные анимации при открытии модалок и переключении вкладок.

---

## Потоки пользовательских сценариев (пример)
**Сценарий: Отметить посещаемость на паре**
1. Староста открывает вкладку "Сегодняшние пары" или календарь.
2. Выбирает пару 2025-11-17 09:00 — открывается окно с списком студентов.
3. Помечает отсутствующих (выделяет несколько) и выбирает причину: "б").
4. Нажимает "Отправить отчет". Система сохраняет attendance_records и создаёт запись reports и log.

**Сценарий: Просмотр отчёта за месяц**
1. Открыть вкладку Графики -> выбрать интервал «Прошлый месяц».
2. Видит график с суммарными отсутствиями и может кликнуть на день для развертывания списка студентов.

