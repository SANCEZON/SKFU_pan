# Инструкция по установке и запуску

## Предварительные требования

- Node.js 18+ и npm
- Docker и Docker Compose (для локального Supabase)

## Установка

1. Установите зависимости:
```bash
npm install
```

2. Настройте переменные окружения:
Создайте файл `.env.local` в корне проекта:
```
VITE_SUPABASE_URL=http://localhost:54321
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
```

3. Запустите локальный Supabase:
```bash
docker-compose up -d
```

4. Примените миграции базы данных:
Подключитесь к базе данных PostgreSQL (порт 54322) и выполните SQL из файла `supabase/migrations/001_initial_schema.sql`

Или используйте Supabase Studio (если настроен):
- Откройте http://localhost:54323
- Перейдите в SQL Editor
- Выполните содержимое файла миграции

5. Запустите dev сервер:
```bash
npm run dev
```

Приложение будет доступно по адресу http://localhost:5173

## Первый вход

1. Откройте приложение в браузере
2. Зарегистрируйте нового пользователя (email/password)
3. После регистрации вы сможете использовать все функции системы

## Основные функции

- **Студенты**: Управление списком студентов, импорт/экспорт CSV
- **Преподаватели**: Управление преподавателями
- **Расписание**: Создание расписания, календарный вид
- **Посещаемость**: Отметка посещаемости на парах
- **Отчёты**: Просмотр и экспорт отчётов
- **Графики**: Аналитика посещаемости
- **Профиль студента**: Детальная информация о пропусках
- **Заметки**: Личные заметки
- **Логи**: Журнал действий
- **Настройки**: Настройка системы и причин отсутствия

## Структура базы данных

Все таблицы создаются автоматически при применении миграции:
- students - студенты
- teachers - преподаватели
- subjects - предметы
- schedules - расписание
- schedule_sessions - сессии пар
- attendance_records - записи посещаемости
- reports - отчёты
- absence_reasons - причины отсутствия
- notes - заметки
- activity_logs - логи действий
- settings - настройки

## Troubleshooting

Если возникают проблемы:

1. Проверьте, что Docker контейнеры запущены:
```bash
docker-compose ps
```

2. Проверьте логи Supabase:
```bash
docker-compose logs supabase
```

3. Убедитесь, что миграции применены (проверьте наличие таблиц в базе)

4. Очистите кеш и переустановите зависимости:
```bash
rm -rf node_modules package-lock.json
npm install
```

